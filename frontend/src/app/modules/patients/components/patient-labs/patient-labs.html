<div class="space-y-4">
  @for (lab of labResults; track $index) {
    <div class="rounded-lg border border-slate-200 bg-white shadow-sm">
      <!-- Card Header -->
      <div class="flex items-center justify-between border-b border-slate-200 p-4 md:px-6 md:py-4">
        <span class="font-medium text-slate-700">
          <i class="fa-solid fa-calendar-alt mr-2 w-5 text-center text-slate-400"></i>
          <strong>Date Performed:</strong>
          {{ lab.date_performed ? (lab.date_performed | date: 'longDate') : 'N/A' }}
        </span>
      </div>

      <!-- Card Body -->
      <div class="p-4 md:p-6">
        @if (lab.test_type) {
          <h3 class="mb-4 flex items-center gap-3 text-lg font-semibold text-slate-800">
            <i class="fa-solid fa-vial-virus w-5 text-center text-slate-400"></i>
            <span>{{ lab.test_type }}</span>
          </h3>
        }

        <!-- Results Table -->
        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-slate-50">
              <tr>
                <th class="px-4 py-2 text-left font-medium text-slate-600">Test</th>
                <th class="px-4 py-2 text-left font-medium text-slate-600">Result</th>
                <th class="px-4 py-2 text-left font-medium text-slate-600">Unit</th>
                <th class="px-4 py-2 text-left font-medium text-slate-600">Reference Range</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-200">
              @for (test of lab.results; track $index) {
                <tr>
                  <td class="px-4 py-2.5 font-medium text-slate-800">
                    {{ test.test_name || 'N/A' }}
                  </td>
                  <td class="px-4 py-2.5 text-slate-700">{{ test.value || 'N/A' }}</td>
                  <td class="px-4 py-2.5 text-slate-700">{{ test.unit || 'N/A' }}</td>
                  <td class="px-4 py-2.5 text-slate-500">{{ test.reference_range || 'N/A' }}</td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
  } @empty {
    <div class="rounded-lg border border-slate-200 bg-white p-12 text-center shadow-sm">
      <i class="fa-solid fa-flask-vial fa-3x mb-3 text-slate-400"></i>
      <p class="font-medium text-slate-500">No Lab Results</p>
      <p class="text-sm text-slate-400">There are no lab results on file for this patient.</p>
    </div>
  }
</div>
